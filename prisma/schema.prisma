generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


model User {
  id                    Int           @id @default(autoincrement())
  email                 String        @unique
  password              String
  name                  String
  role                  String
  dateOfBirth           DateTime?
  phoneNumber           String?
  address               String?
  city                  String?
  state                 String?
  postalCode            String?
  emergencyContactName  String?
  emergencyContactPhone String?
  medicalHistory        String?       
  allergies             String?       
  createdAt             DateTime      @default(now())
  updatedAt             DateTime      @updatedAt
  patientAppointments   Appointment[] @relation("PatientAppointments")
  doctorAppointments    Appointment[] @relation("DoctorAppointments")
}

model Appointment {
  id                   Int       @id @default(autoincrement())
  date                 DateTime
  patientId            Int
  doctorId             Int
  diagnosis            String?
  treatmentPlan        String?
  medications          String?
  followUp             DateTime?
  notes                String?
  allergies            String?
  createdAt            DateTime  @default(now())
  updatedAt            DateTime  @updatedAt
  patient              User      @relation("PatientAppointments", fields: [patientId], references: [id])
  doctor               User      @relation("DoctorAppointments", fields: [doctorId], references: [id])
}
